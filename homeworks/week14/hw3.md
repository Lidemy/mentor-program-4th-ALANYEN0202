## 什麼是 DNS？Google 有提供的公開的 DNS，對 Google 的好處以及對一般大眾的好處是什麼？
### 什麼是 DNS ?
DNS ( Domain Name System ) 域名系統，是用來把域名 ( Domain ) 指向固定的 IP 位置的指路人。

域名：就是方便我們記憶好讀的名字。例如： google.com、youtube.com 之類的。

IP: 就是電腦世界真正的地址標示方式。例如：122.123.33.11。

而 DNS 就只是把域名導向正確的 IP 位置而已，就像是你坐計程車跟司機說，我要到 101 你不用跟司機說確切地址 (台北市信義區....) 司機就會把你送到確切位置一樣，司機就像是 DNS。

### Google 有提供的公開的 DNS，對 Google 的好處以及對一般大眾的好處是什麼？

對 google 來說他可以把顧客連線的資訊做分析，利用這些資訊來做事情。

對顧客來說， google 各地都有伺服器，可以提高速度、安全性。


## 什麼是資料庫的 lock？為什麼我們需要 lock？
主要是為了避免 Race Condition ( 競爭危害 )。

舉個搶購的例子：

假設你有一個資料表只有產品 id、數量而已，而當網頁上有顧客點選購買時你的資料表也同時會把數量 -1 直到數量為 0 就關閉購買的按鈕。

聽起來很合理對吧？ 但你沒有想到這是網路店面，顧客是從四面八方的瀏覽器來的，他們可能同時按購買，也有可能不同時但請求卻同時，由於非同步的關係，萬一數量剩 1 時，同時收到 2 位以上的購買請求，因為目前數量都不為 0 電腦會判定可以讓 2 位購買，就變成只剩 1 件商品卻讓 2 位顧客購買，
變成超賣。

而預防這種情形的方法之一就是在資料庫使用 lock ( 鎖 )

使用方法很簡單： 這邊是用 MySQL 做示範

條件：需在 transaction 的語法裡面使用

只要在 query 最後面加上 `for update`
```php

$conn->autocommit(FALSE);
$conn->begin_transaction();
$stmt = $conn->prepare('SELECT amount FROM products WHERE id = 1 **FOR UPDATE**');
...
$stmt = $conn->prepare('UPDATE products SET amount = amount - 1 WHERE id = 1');
```
他就會鎖在你加 for update 那行，等全部指令執行完畢才會解鎖讓你跑，這邊要注意一下因為有使用 `where id = 1` 指定某一行，才會只鎖住一行，沒設定的話會鎖住一整個資料表，變得沒必要也浪費很多資源。
## NoSQL 跟 SQL 的差別在哪裡？
NoSQL ( not only SQL ) 代表不只有關連式資料庫，通常都是直接儲存 JSON 資料，沒有結構，通常儲存大量並且不固定的資料時會使用到。

|  表头   | SQL   | NoSQL |
|  ----   | ---- | ----- |
| 結構    | 有    |  沒有  |
| JOIN   | 支援   | 不支援 |
| 資料量  | 較小 |    較龐大   |

## 資料庫的 ACID 是什麼？

當資料在進行 transaction ( 交易 )，為了保持正確，須符合一些規則，這些規則就是 ACID

atomicity ( 原子性 )：要嘛全成功，要嘛全失敗。

consistency ( 一致性 )：維持一致性 ( 數目相同 )

isolation ( 隔離性 )：多筆交易不互相影響 ( 不能同時影響同一個值 )

durability ( 持久性 )： 成功後，寫入資料不會不見。


原子性 A： 假如你要轉帳給別人 50 元，會有兩個步驟，

一、你少了 50 元 

二、別人多了 50 元

如果沒有原子性的話，會變成只有一或二完成，這樣就不對了。

一致性 C: 乘上個例子，假如你要轉帳給別人 50 元，一樣會有兩個步驟，

一、你少了 50 元 

二、別人多了 50 元

照理說總數都會是 50 元，但如果變成

一、你少了 50 元 

二、別人多了 30 元

這樣總數就變成了 30 元，就不對了，
就沒有一致性。 所以有原子性不一定有一致性。


隔離性 I: 假如你同時轉帳給兩個人 50 元 ( 但你只有 50 元 )，由於沒有隔離性 ( 當你轉給 a 時也同時轉給 b ，電腦判定你有 50 元)，變成同時改同一個值，因此轉完會變成 -50 就不對了。

持久性 D: 比較好理解，就是資料需永久保存，不能突然消失之類的。


